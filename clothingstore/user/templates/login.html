{% extends "base.html" %}
{% load static %}

{% block head %}
  <title>Clauch Partner Login - Wholesale & B2B Dashboard</title>
  <meta name="description" content="Login to Clauch Partner Portal to manage B2B clothing orders, wholesale collections, and business dashboards. Secure OTP-based login for verified partners.">
  <meta name="keywords" content="Clauch partner login, B2B clothing, wholesale clothing portal, business login, fashion B2B, Clauch dashboard">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="{{ request.build_absolute_uri }}">

  <!-- Open Graph for social sharing -->
  <meta property="og:title" content="Clauch Partner Login - B2B Dashboard">
  <meta property="og:description" content="Access your Clauch B2B wholesale dashboard. Secure login via OTP to manage your clothing business effortlessly.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="{{ request.build_absolute_uri }}">
  <meta property="og:site_name" content="Clauch">
  <meta property="og:image" content="{% static 'images/og-partner-login.jpg' %}">  {# replace with a real image path #}
{% endblock %}

{% block content %}
<div class="min-h-screen bg-white text-gray-900 font-montserrat flex items-center justify-center px-4">
  <div class="w-full max-w-md">

    <!-- Brand & Heading -->
    <div class="text-center pt-8">
      <h1 class="text-3xl sm:text-4xl font-bold tracking-wide text-gray-900">
        Clauch Partner Login
      </h1>
      <p class="text-sm sm:text-base text-gray-500 mt-2">
        Manage your B2B orders, collections & wholesale dashboard.
      </p>
    </div>

    <!-- Video Preview or Business Visual -->
    <div class="w-full mt-6">
      <video autoplay muted loop playsinline class="w-full h-64 object-cover rounded shadow">
        <source src="{% static 'videos/login-vid.mov' %}" type="video/mp4" />
        Your browser does not support the video tag.
      </video>
    </div>

    <!-- Phone/OTP Form -->
    <div class="mt-8 bg-white px-6 py-6 shadow-md rounded-lg space-y-6">

      {% if not request.session.phone_number %}
      <!-- Phone Number Input -->
      <form method="POST" action="{% url 'send_otp' %}">
        {% csrf_token %}
        <label class="block text-sm font-medium text-gray-700 mb-2">Phone Number</label>
        <input type="tel" name="phone_number" maxlength="10" required
               placeholder="Enter your business phone"
               class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-black" />
        <button type="submit"
                class="w-full mt-4 py-3 text-sm font-semibold text-white bg-black hover:bg-gray-800 transition rounded">
          Send OTP
        </button>
      </form>
      {% endif %}

      {% if request.session.phone_number %}
      <!-- OTP Verification -->
      <form method="POST" action="{% url 'verify_otp' %}">
        {% csrf_token %}
        <label class="block text-sm font-medium text-gray-700 mb-2">Enter OTP</label>
        <input type="text" name="otp" maxlength="6" pattern="[0-9]*" required
               placeholder="6-digit code"
               class="w-full px-4 py-3 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-black" />
        <button type="submit"
                class="w-full mt-4 py-3 text-sm font-semibold text-white bg-black hover:bg-gray-800 transition rounded">
          Verify & Continue
        </button>
      </form>

      <!-- Resend / Change -->
      <div class="text-center mt-4 space-y-2">
        <form method="POST" action="{% url 'resend_otp' %}">
          {% csrf_token %}
          <button type="submit" class="text-sm text-blue-600 hover:underline">Resend OTP</button>
        </form>

        <form method="POST" action="{% url 'change_number' %}">
          {% csrf_token %}
          <button type="submit" class="text-xs text-red-600 hover:underline">Entered wrong number? Change</button>
        </form>
      </div>

      <!-- Display Phone -->
      <div class="text-xs text-gray-500 text-center mt-2">
        Logging in as: +91{{ request.session.phone_number }}
      </div>
      {% endif %}

    </div>

    <!-- Terms -->
    <div class="text-center text-xs text-gray-500 mt-6 px-6 pb-6">
      By continuing, you agree to our <a href="#" class="underline">Terms</a> and <a href="#" class="underline">Privacy Policy</a>.
    </div>

  </div>
</div>
{% endblock %}
