{% extends "base.html" %}
{% load static %}

{% block seo %}
<title>{{ category.name }} Manufacturer in India | Clauch Factory</title>

<meta name="description" content="Clauch Factory is a trusted {{ category.name }} manufacturer in India offering bulk production, private labeling, low MOQ and factory-direct pricing for wholesalers and fashion brands.">

<meta name="keywords" content="{{ category.name }} manufacturer India, wholesale {{ category.name }}, bulk {{ category.name }}, private label {{ category.name }}, B2B {{ category.name }}">

<meta name="robots" content="index, follow">
<link rel="canonical" href="{{ request.build_absolute_uri }}">

<!-- Open Graph -->
<meta property="og:title" content="{{ category.name }} Manufacturer in India | Clauch Factory">
<meta property="og:description" content="Bulk {{ category.name }} manufacturing from India. Private label, export-ready production and factory pricing by Clauch Factory.">
<meta property="og:image" content="{{ category.image.url }}">
<meta property="og:url" content="{{ request.build_absolute_uri }}">
<meta property="og:type" content="website">
<meta property="og:site_name" content="Clauch Factory">

<!-- Twitter -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ category.name }} Manufacturer in India | Clauch Factory">
<meta name="twitter:description" content="B2B {{ category.name }} manufacturer in India offering bulk supply, private labeling and low MOQ.">
<meta name="twitter:image" content="{{ category.image.url }}">

<!-- Category Schema -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "CollectionPage",
  "name": "{{ category.name }} Manufacturer in India",
  "description": "Bulk {{ category.name }} manufacturing in India by Clauch Factory with private labeling and factory-direct supply.",
  "url": "{{ request.build_absolute_uri }}",
  "isPartOf": {
    "@type": "WebSite",
    "name": "Clauch Factory",
    "url": "https://clauchfactory.com/"
  }
}
</script>
{% endblock %}

{% block content %}

<!-- ✅ H1 -->
<h1 class="text-center text-lg sm:text-xl font-semibold mt-6 mb-4 uppercase tracking-wide">
    {{ category.name }} Manufacturer in India
</h1>

<!-- Category navigation -->
<div class="w-full overflow-x-auto whitespace-nowrap border-b border-gray-300 py-3 px-4 bg-white flex items-center">
    <div class="flex gap-2 flex-grow">
        {% for label in categories %}
        <a href="{% url 'category_detail' label.slug %}">
            <button class="px-4 py-1 border text-xs sm:text-sm border-gray-800 text-gray-800 font-medium hover:bg-black hover:text-white transition-all duration-200">
                {{ label.name }}
            </button>
        </a>
        {% endfor %}
    </div>
</div>

<!-- Filter bar -->
<div class="w-full px-4 py-3 bg-white border-b border-gray-300 flex items-center justify-between sm:justify-start sm:gap-4">
    <span class="text-sm font-medium text-gray-700">Filters</span>
    <button onclick="toggleFilter()" class="ml-auto sm:ml-0 flex items-center gap-2 border border-gray-300 px-3 py-1 rounded text-sm hover:bg-black hover:text-white transition-all">
        <img src="{% static 'icons/filter.svg' %}" alt="Filter" class="w-4 h-4">
        <span>Open Filters</span>
    </button>
</div>

<!-- Products -->
<div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 px-3 pt-4 pb-16">
    {% for product in products %}
    <div class="w-full">
        <div class="relative">
            <a href="{% url 'product_detail' product.slug %}">
                <div class="relative w-full img-3-4">
                    <img src="{{ product.primary_image.url }}" alt="{{ product.name }}" class="w-full h-full object-cover bg-white">
                </div>
            </a>

            <button class="absolute top-2 right-2 bg-black text-white text-xs px-4 py-2 rounded shadow-md hover:shadow-lg transition-all">
                ADD
            </button>
        </div>

        <div class="pt-1 pb-2">
            <p class="text-xs sm:text-sm text-gray-900 leading-tight truncate">{{ product.name }}</p>

            <div class="text-base font-bold text-gray-900 mt-1">
                ₹{{ product.get_current_price_per_piece|floatformat:0 }}
                <span class="text-xs font-normal text-gray-600">/ Piece</span>
            </div>

            {% if product.get_total_pieces_in_set > 0 %}
            <p class="text-xs text-gray-500 mt-0.5">
                Set: ₹{{ product.discount_price|default:product.price|floatformat:0 }}
            </p>
            {% endif %}
        </div>
    </div>
    {% endfor %}
</div>

<!-- ✅ SEO CONTENT (BOTTOM – CLEAN) -->
<div class="max-w-5xl mx-auto px-4 py-12 mt-24 border-t border-gray-200 text-sm text-gray-700 leading-relaxed">

    <h2 class="text-lg font-semibold mb-3">
        {{ category.name }} Manufacturer in India
    </h2>

    <p class="mb-4">
        Clauch Factory is a leading {{ category.name|lower }} manufacturer in India
        supplying bulk apparel to wholesalers, retailers, and private fashion brands
        worldwide. Our production process focuses on consistent sizing, premium fabrics,
        and scalable manufacturing capacity.
    </p>

    <p class="mb-4">
        We offer private labeling, custom design development, and low MOQ options,
        allowing brands to launch and expand efficiently. All garments are produced
        under strict quality control standards at our Indian manufacturing facility.
    </p>

    <h3 class="font-semibold mt-6 mb-2">
        Why Choose Clauch Factory?
    </h3>

    <ul class="list-disc pl-5 space-y-1">
        <li>Factory-direct pricing</li>
        <li>Bulk and private label manufacturing</li>
        <li>Low MOQ options available</li>
        <li>Export-ready apparel production</li>
        <li>Worldwide B2B supply</li>
    </ul>

</div>

<!-- Filter Panel -->
<div id="filterPanel" class="fixed bottom-0 left-0 w-full bg-white z-50 h-[50vh] transform translate-y-full transition-transform duration-300 ease-in-out shadow-2xl rounded-t-xl">
    <div class="h-full flex flex-col">
        <div class="flex justify-between items-center px-4 py-2 border-b">
            <h2 class="text-base font-semibold">Filters</h2>
            <button onclick="toggleFilter()" class="text-sm text-gray-500">Close ✕</button>
        </div>

        <div class="flex-1 overflow-y-auto px-4 pb-20 pt-2">
            {% comment %} filter UI unchanged {% endcomment %}
        </div>

        <div class="absolute bottom-0 left-0 w-full bg-white px-4 py-3 border-t">
            <button class="w-full py-2 bg-black text-white font-medium text-sm rounded">
                Apply Filters
            </button>
        </div>
    </div>
</div>

<script>
function toggleFilter() {
    document.getElementById('filterPanel').classList.toggle('translate-y-full');
}

function toggleSection(id) {
    const section = document.getElementById('section-' + id);
    const icon = document.getElementById('icon-' + id);

    if (section.classList.contains('hidden')) {
        section.classList.remove('hidden');
        icon.textContent = '−';
    } else {
        section.classList.add('hidden');
        icon.textContent = '+';
    }
}
</script>

{% endblock %}
